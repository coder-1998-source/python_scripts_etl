document.addEventListener("DOMContentLoaded", function () {
    // Read dictionary from template
    const regionCountryDict = JSON.parse(document.getElementById("region-data").textContent);

    const regionSelect = document.getElementById("region-select");
    const countrySelect = document.getElementById("country-select");

    if (!regionSelect || !countrySelect) return;

    // Event listener for region change
    regionSelect.addEventListener("change", function () {
        const selectedRegion = this.value.trim(); // remove spaces

        // Clear previous options
        countrySelect.innerHTML = '<option value="">-- Select Country --</option>';

        // Populate new options
        if (selectedRegion && regionCountryDict[selectedRegion]) {
            regionCountryDict[selectedRegion].forEach(country => {
                const option = document.createElement("option");
                option.value = country;
                option.textContent = country;
                countrySelect.appendChild(option);
            });
        }
    });
});
