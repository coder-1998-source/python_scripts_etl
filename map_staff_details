import PySimpleGUI as sg
import pandas as pd

# Sample DataFrame
data = {
    'staffname': ['Alice', 'Bob', 'Charlie', 'David'],
    'staffid': [None, '123', None, None]
}
df = pd.DataFrame(data)

# Filter rows where 'staffid' is null
null_staffid_rows = df[df['staffid'].isnull()]

# Prepare the layout dynamically for each missing staffid
layout = []
for _, row in null_staffid_rows.iterrows():
    staffname = row['staffname']
    layout.append([sg.Text(f"Enter Staff ID for {staffname}:"), sg.InputText(key=staffname)])

layout.append([sg.Button('OK')])

# Show the popup with all the missing staffid entries
window = sg.Window("Enter Missing Staff IDs", layout)
event, values = window.read()
window.close()

# Update the DataFrame with the entered staff IDs
if event == 'OK':
    for staffname, staffid in values.items():
        if staffid:  # Only update if there's a value entered
            df.loc[df['staffname'] == staffname, 'staffid'] = staffid

# Show the updated DataFrame
print(df)
